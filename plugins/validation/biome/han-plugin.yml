hooks:
  # Full project validation at Stop (checkpoint)
  lint:
    event: Stop
    command: "npx -y @biomejs/biome check --write --error-on-warnings ${HAN_FILES}"
    dir_test: '[ "$(cat biome.json | han parse json root)" != "false" ]'
    dirs_with:
      - "biome.json"
    if_changed:
      - "**/*.{js,jsx,ts,tsx,json,jsonc}"

  # Single-file async validation on PostToolUse
  lint-async:
    event: PostToolUse
    command: "npx -y @biomejs/biome check --write --error-on-warnings ${HAN_FILES}"
    dirs_with:
      - "biome.json"
    tool_filter:
      - Edit
      - Write
      - NotebookEdit
    file_filter:
      - "**/*.{js,jsx,ts,tsx,json,jsonc}"
