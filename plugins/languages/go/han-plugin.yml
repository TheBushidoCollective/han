hooks:
  # Full project hooks at Stop (checkpoint)
  format:
    command: "go fmt ./..."
    dirs_with:
      - "go.mod"
    if_changed:
      - "**/*.go"
      - "**/*.tmpl"
      - "go.mod"
      - "go.sum"
  lint:
    command: "go vet ./..."
    dirs_with:
      - "go.mod"
    if_changed:
      - "**/*.go"
      - "**/*.tmpl"
      - "go.mod"
      - "go.sum"
  test:
    command: "go test ./..."
    dirs_with:
      - "go.mod"
    if_changed:
      - "**/*.go"
      - "**/*.tmpl"
      - "go.mod"
      - "go.sum"

  # Async hooks on PostToolUse - immediate feedback on file changes
  format-async:
    event: PostToolUse
    command: "gofmt -l ${HAN_FILES}"
    dirs_with:
      - "go.mod"
    tool_filter:
      - Edit
      - Write
    file_filter:
      - "**/*.go"

  lint-async:
    event: PostToolUse
    command: "go vet ./..."
    dirs_with:
      - "go.mod"
    tool_filter:
      - Edit
      - Write
    file_filter:
      - "**/*.go"
