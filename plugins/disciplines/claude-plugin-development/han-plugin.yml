hooks:
  lint:
    event: Stop
    command: '"${CLAUDE_PLUGIN_ROOT}/hooks/lint.sh"'
    dirs_with:
      - ".claude-plugin/"
    if_changed:
      - "**/*.md"
      - ".claude-plugin/**"
      - "commands/**"
      - "skills/**"
  config-sync:
    command: "cd packages/han && bun run lint:config-sync"
    dir_test: "test -d packages/han && test -f packages/han/package.json"
    if_changed:
      - "**/han-plugin.yml"
  generate-hooks:
    event: [Stop, PostToolUse:Edit|Write]
    command: |
      for f in ${HAN_FILES}; do
        case "$f" in
          */han-plugin.yml|han-plugin.yml)
            han plugin generate-hooks "$(dirname "$f")" --quiet
            ;;
        esac
      done
    dirs_with:
      - "han-plugin.yml"
    if_changed:
      - "**/han-plugin.yml"
