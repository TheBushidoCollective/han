# sentry plugin configuration
# This plugin provides Sentry integration via MCP server
# MCP server is defined in .mcp.json for direct exposure to Claude Code

# No hooks - MCP server plugins don't have validation hooks
hooks: {}

# Learn patterns - regex patterns that trigger auto-installation when detected in user prompts
# Matches Sentry URLs (cloud and self-hosted) and DSN patterns
learn_patterns:
  - "https?://[^\\s]*\\.sentry\\.io/[^\\s]+"
  - "https?://[^\\s]*@[^\\s]*\\.ingest\\.sentry\\.io"
  - "self-hosted sentry"
  - "sentry.*self.hosted"

# Memory provider for team memory extraction from Sentry
# Convention: provider name = plugin name, script = memory-provider.ts
memory:
  allowed_tools:
    - mcp__plugin_hashi-sentry_sentry__list_issues
    - mcp__plugin_hashi-sentry_sentry__get_issue
    - mcp__plugin_hashi-sentry_sentry__list_events
  system_prompt: |
    Extract observations from Sentry error reports and issues. For each item, capture:
    - timestamp: when the error first/last occurred
    - summary: error message and stack trace highlights
    - frequency: how often this error occurs
    - status: issue state (unresolved, resolved, ignored)
    - type: 'error', 'issue', or 'event'
    Focus on patterns and recurring issues. Return as JSON array of observations.
