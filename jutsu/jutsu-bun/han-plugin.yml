hooks:
  build:
    command: "grep -q '\"build\"' package.json 2>/dev/null && bun run build || echo 'No build script found, skipping'"
    dirs_with:
      - "bun.lock"
      - "bun.lockb"
    if_changed:
      - "**/*.ts"
      - "**/*.tsx"
      - "**/*.js"
      - "**/*.jsx"
      - "bun.lock"
      - "bun.lockb"
      - "bunfig.toml"
  test:
    command: "bun test --only-failures"
    dirs_with:
      - "bun.lock"
      - "bun.lockb"
    if_changed:
      - "**/*.ts"
      - "**/*.tsx"
      - "**/*.js"
      - "**/*.jsx"
      - "bun.lock"
      - "bun.lockb"
      - "bunfig.toml"
