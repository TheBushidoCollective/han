@import "tailwindcss";
@import "./tailwind-variants.css";

@source "../app";
@source "../components";

@plugin "@tailwindcss/typography";

:root {
	--background: #ffffff;
	--foreground: #171717;
}

:root.dark,
html.dark {
	--background: #0a0a0a;
	--foreground: #ededed;
}

:root.light,
html.light {
	--background: #ffffff;
	--foreground: #171717;
}

@media (prefers-color-scheme: dark) {
	:root:not(.light) {
		--background: #0a0a0a;
		--foreground: #ededed;
	}
}

body {
	max-width: 100vw;
	overflow-x: hidden;
}

body {
	color: var(--foreground);
	background: var(--background);
	font-family:
		-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu",
		"Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
}

/* Custom scrollbar styling - default light */
.scrollbar-custom {
	scrollbar-width: thin;
	scrollbar-color: rgb(209 213 219) transparent;
}

.scrollbar-custom::-webkit-scrollbar {
	width: 6px;
}

.scrollbar-custom::-webkit-scrollbar-track {
	background: transparent;
}

.scrollbar-custom::-webkit-scrollbar-thumb {
	background-color: rgb(209 213 219);
	border-radius: 3px;
}

.scrollbar-custom::-webkit-scrollbar-thumb:hover {
	background-color: rgb(156 163 175);
}

/* Dark mode scrollbar */
:root.dark .scrollbar-custom,
html.dark .scrollbar-custom {
	scrollbar-color: rgb(75 85 99) transparent;
}

:root.dark .scrollbar-custom::-webkit-scrollbar-thumb,
html.dark .scrollbar-custom::-webkit-scrollbar-thumb {
	background-color: rgb(75 85 99);
}

:root.dark .scrollbar-custom::-webkit-scrollbar-thumb:hover,
html.dark .scrollbar-custom::-webkit-scrollbar-thumb:hover {
	background-color: rgb(107 114 128);
}

@media (prefers-color-scheme: dark) {
	:root:not(.light) .scrollbar-custom {
		scrollbar-color: rgb(75 85 99) transparent;
	}

	:root:not(.light) .scrollbar-custom::-webkit-scrollbar-thumb {
		background-color: rgb(75 85 99);
	}

	:root:not(.light) .scrollbar-custom::-webkit-scrollbar-thumb:hover {
		background-color: rgb(107 114 128);
	}
}

/* Responsive prose tables */
.prose table {
	display: block;
	max-width: 100%;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

.prose thead,
.prose tbody,
.prose tr {
	display: table;
	width: 100%;
	table-layout: fixed;
}

/* Ensure tables are readable on mobile */
@media (max-width: 640px) {
	.prose table {
		font-size: 0.875rem;
	}

	.prose th,
	.prose td {
		padding: 0.5rem 0.75rem;
	}
}

/* Prevent code blocks from causing overflow */
.prose pre {
	max-width: 100%;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

/* Ensure long URLs and text wrap properly */
.prose {
	overflow-wrap: break-word;
	word-wrap: break-word;
	word-break: break-word;
}

.prose a {
	word-break: break-word;
}

/* Split-flap character tiles */
.flip-char {
	display: inline-block;
	position: relative;
	width: 0.62em;
	height: 1.15em;
	font-family: "Courier New", Courier, monospace;
	font-weight: 700;
	font-size: inherit;
	vertical-align: baseline;
	color: inherit;
	-webkit-text-fill-color: transparent;
	line-height: 1.15em;
	perspective: 300px;
	transform-style: preserve-3d;
}

.flip-char::before,
.flip-char::after {
	content: attr(data-char);
	position: absolute;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	color: #fff;
	-webkit-text-fill-color: #fff;
	background-color: #1f2937;
	backface-visibility: hidden;
}

.flip-char::after {
	border-radius: 0.08em;
	animation: splitflap-flip-in 0.4s var(--flip-delay, 0s)
		cubic-bezier(0.2, 0, 0.4, 1) both;
}

.flip-char::before {
	border-radius: 0.08em;
	transform: rotateX(-180deg);
}

@keyframes splitflap-flip-in {
	0% {
		transform: rotateX(90deg);
		opacity: 0.3;
	}
	60% {
		transform: rotateX(-5deg);
		opacity: 1;
	}
	100% {
		transform: rotateX(0deg);
		opacity: 1;
	}
}

/* Override highlight.js background to match code editor styling */
pre.hljs,
pre code.hljs,
pre > code,
.hljs {
	/* biome-ignore lint/complexity/noImportantStyles: Required to override highlight.js defaults */
	background: transparent !important;
	/* biome-ignore lint/complexity/noImportantStyles: Required to override highlight.js defaults */
	padding: 0 !important;
	/* biome-ignore lint/complexity/noImportantStyles: Required to override highlight.js defaults */
	margin: 0 !important;
}
