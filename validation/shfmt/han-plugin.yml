hooks:
  # Full project format check at Stop (checkpoint)
  format:
    command: "shfmt -d ."
    dirs_with:
      - ".shfmt.toml"
      - "shfmt.toml"
      - "*.sh"
    if_changed:
      - "**/*.sh"
      - "**/*.bash"
      - "**/.[!.]*"

  # Single-file async format check on PostToolUse
  format-async:
    event: PostToolUse
    command: "shfmt -d ${HAN_FILES}"
    dirs_with:
      - ".shfmt.toml"
      - "shfmt.toml"
      - "*.sh"
    tool_filter:
      - Edit
      - Write
    file_filter:
      - "**/*.sh"
      - "**/*.bash"
