# jutsu-ai-dlc - AI-DLC 2026 Methodology Plugin
#
# Provides iterative AI-driven development workflow with:
# - Hat-based role switching
# - Named workflows (patterns) - see workflows.yml
# - Completion criteria tracking
# - Automatic context preservation across /clear

hooks:
  inject-context:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/inject-context.sh"
    event: SessionStart
    description: Inject AI-DLC iteration context (hat, intent, criteria, scratchpad)

  # PreToolUse hook - inject AI-DLC context into Task and Skill tool prompts
  pretooluse-inject:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/pretooluse-inject.sh"
    event: PreToolUse
    tool_filter:
      - Task
      - Skill
    description: Inject AI-DLC context into subagent and skill prompts

  # SubagentPrompt hook - inject condensed AI-DLC context into subagents
  subagent-context:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/subagent-context.sh"
    event: SubagentPrompt
    description: Inject AI-DLC intent and hat context to subagents

  iterate:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/enforce-iteration.sh"
    event: Stop
    description: Enforce iteration pattern - prompt for /clear to continue
    depends_on:
      - plugin: "*"
        hook: "*"
      - plugin: jutsu-git-storytelling
        hook: commit
        optional: true
