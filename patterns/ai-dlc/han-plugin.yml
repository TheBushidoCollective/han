# jutsu-ai-dlc - AI-DLC 2026 Methodology Plugin
#
# Provides iterative AI-driven development workflow with:
# - Hat-based role switching
# - Named workflows (patterns) - see workflows.yml
# - Completion criteria tracking
# - Automatic context preservation across /clear

hooks:
  inject-context:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/inject-context.sh"
    event: SessionStart
    description: Inject AI-DLC iteration context (hat, intent, criteria, scratchpad)

  # SubagentPrompt hook - provides AI-DLC context for subagent injection
  # Context is gathered by core's PreToolUse hook (han hook inject-subagent-context)
  # and injected into Task and Skill tool prompts automatically.
  #
  # Optional: Use tool_filter to limit which tools receive this context:
  #   tool_filter: [Task]        # Only inject for Task tool (subagents)
  #   tool_filter: [Skill]       # Only inject for Skill tool
  #   tool_filter: [Task, Skill] # Both (default behavior if omitted)
  subagent-context:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/subagent-context.sh"
    event: SubagentPrompt
    description: Provide AI-DLC intent, hat, and workflow context for subagent injection
    # No tool_filter = applies to both Task and Skill

  iterate:
    command: bash "${CLAUDE_PLUGIN_ROOT}/hooks/enforce-iteration.sh"
    event: Stop
    description: Enforce iteration pattern - prompt for /clear to continue
    depends_on:
      - plugin: "*"
        hook: "*"
      - plugin: jutsu-git-storytelling
        hook: commit
        optional: true
