{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://han.guru/schemas/ai-dlc-settings.schema.json",
	"title": "AI-DLC Settings",
	"description": "Configuration schema for .ai-dlc/settings.yml files that configure AI-DLC behavior including VCS strategy",
	"type": "object",
	"properties": {
		"git": {
			"$ref": "#/definitions/vcsConfig",
			"description": "VCS configuration when using Git"
		},
		"jj": {
			"$ref": "#/definitions/vcsConfig",
			"description": "VCS configuration when using Jujutsu (jj)"
		}
	},
	"additionalProperties": false,
	"definitions": {
		"vcsConfig": {
			"type": "object",
			"description": "Version control system configuration",
			"properties": {
				"change_strategy": {
					"type": "string",
					"enum": ["trunk", "unit", "bolt", "intent"],
					"default": "unit",
					"description": "How changes are organized:\n- trunk: All work on main branch, no feature branches\n- unit: One branch per unit of work (default)\n- bolt: One branch per intent with squashed commits\n- intent: One long-lived branch per intent with linear history"
				},
				"elaboration_review": {
					"type": "boolean",
					"default": true,
					"description": "Whether to create a pull request for elaborated intent review before planning"
				},
				"default_branch": {
					"type": "string",
					"default": "auto",
					"description": "The default/main branch name. Set to 'auto' to detect from remote (origin/HEAD), or specify explicitly (e.g., 'main', 'master', 'develop')"
				},
				"auto_merge": {
					"type": "boolean",
					"description": "Whether to automatically merge completed unit branches. Only applies to 'unit' and 'bolt' strategies."
				},
				"auto_squash": {
					"type": "boolean",
					"description": "Whether to squash commits when merging. Only applies when auto_merge is enabled."
				}
			},
			"additionalProperties": false
		}
	}
}
